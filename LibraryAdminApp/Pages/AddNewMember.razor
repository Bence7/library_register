@page "/addnewmember"
@using LibraryAdminApp.Model
@using LibraryAdminApp.Services

<PageTitle>Add new member</PageTitle>

<div class="d-flex justify-content-center"><h3>Add new member to the library</h3></div>

<div class="d-flex justify-content-center"><span>First name</span><input @bind="FirstName"id="first" type="text"></div>
<div class="d-flex justify-content-center"><span>Last name</span><input @bind="LastName"type="text"></div>
<div class="d-flex justify-content-center"><span>Address</span><input @bind="Address" type="text"></div>
<div class="d-flex justify-content-center"><span>Date of birth</span><input @bind="DateofBirth" type="text" min="1923-01-01"onfocus="(this.type = 'date')"></div>
<div class="d-flex justify-content-center"><button @onclick="addMember"type="submit">ADD</button></div>

@code {
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Address { get; set; }
    public string DateofBirth { get; set; }
    
    public void addMember()
    {
        DateTime dateTime = DateTime.Parse(DateofBirth);
        AddMember addMember = new AddMember(new HttpClient(), "localhost");
        addMember.PostMemberAsync(new MemberModel() { Name = FirstName + " " + LastName, Address = Address, BirthDate = dateTime});
        FirstName = null;
        LastName = null;
        Address = null;
        DateofBirth = null;
    }
}
