@page "/getbackabook"
@using LibraryAdminApp.Services
@using ClassLibrary.Models
@inject IRentService RentService
@inject IBookService BookService
<h3>Get back the rented books</h3>

@code {
    
    [Parameter]
    public int Id { get; set; }
    
    private IEnumerable<BookModel>? unavailableBooks { get; set; }
    protected override async Task OnInitializedAsync()
    {
        unavailableBooks = await BookService.unavailableBookAsync();
    }
    
    private async Task DeleteAsync()
    {
        await RentService.DeleteRentalAsync(Id);
    }
}

@if (unavailableBooks is null)
{
    <p>Loading...</p>
}
else
{
    <table class="table table-dark table-striped">
        <thead>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Publisher</th>
            <th>Publish date</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        @foreach (var book in unavailableBooks)
        {
            <tr>
                <td>@book.Title</td>
                <td>@book.Author</td>
                <td>@book.Publisher</td>
                <td>@book.PublishDate</td>
                <td>
                    <button @onclick="@DeleteAsync" class="btn btn-dark">DELETE</button>
                </td>
            </tr>
        }
        </tbody>
    </table>
}